{"version":3,"sources":["bengor-cookies.js"],"names":["hasClass","el","className","match","RegExp","addClass","removeClass","reg","replace","BenGorCookies","options","Cookies","GoogleTagManager","id","add","remove","element","document","createElement","setAttribute","body","getElementsByTagName","innerHTML","insertBefore","firstChild","setCookie","name","value","expirationDays","date","Date","expires","setTime","getTime","toGMTString","cookie","location","hostname","split","reverse","getCookie","cookies","i","length","charAt","substring","indexOf","acceptCookies","Math","floor","random","GTM","mainElement","scrollingAcceptCookies","maxPageYOffset","window","pageYOffset","querySelector","links","GTMId","console","warn","addEventListener","requestAnimationFrame","elements","querySelectorAll","iLen"],"mappings":";;;;;;;;;AAUA,cAEA,WAMA,QAAAA,GAAAC,EAAAC,GACA,MAAAD,GAAAC,UAAAC,MAAA,GAAAC,QAAA,UAAAF,EAAA,YAGA,QAAAG,GAAAJ,EAAAC,GACAF,EAAAC,EAAAC,KAAAD,EAAAC,WAAA,IAAAA,GAGA,QAAAI,GAAAL,EAAAC,GACA,GAAAF,EAAAC,EAAAC,GAAA,CACA,GAAAK,GAAA,GAAAH,QAAA,UAAAF,EAAA,UACAD,GAAAC,UAAAD,EAAAC,UAAAM,QAAAD,EAAA,MAfA,GAAAE,GAAA,SAAAC,GACA,MAAA,IAAAC,GAAAD,IAkBAE,EAAA,SAAAC,GACA,GAAAC,GAAAC,EAAAC,EAAAC,SAAAC,cAAA,MA2BA,OAzBAL,GAAAA,GAAA,YACAG,EAAAG,aAAA,KAAA,sBAEAL,EAAA,WACA,GAAAM,GAAAH,SAAAI,qBAAA,QAAA,EAEA,oBAAAR,IAAA,cAAAA,GAAAG,EAAAM,YAGAN,EAAAM,UACA,gEAAAT,EAAA,yZAMAA,EAAA,eAEAO,EAAAG,aAAAP,EAAAI,EAAAI,cAGAT,EAAA,WACAC,EAAAM,UAAA,KAIAR,IAAAA,EACAC,OAAAA,IAIAJ,EAAA,SAAAD,GAeA,QAAAe,GAAAC,EAAAC,EAAAC,GACA,GACAC,GAAA,GAAAC,MACAC,EAAA,UAEAF,GAAAG,QAAAH,EAAAI,UAAA,GAAAL,EAAA,GAAA,GAAA,KACAG,GAAAF,EAAAK,cACAjB,SAAAkB,OAAAT,EAAA,IAAAC,EAAA,KAAAI,EAAA,KACAK,SAAAC,SAAAC,MAAA,KAAAC,UAAA,GAAA,IACAH,SAAAC,SAAAC,MAAA,KAAAC,UAAA,GAAA,WAGA,QAAAC,GAAAd,GACA,GAAAe,GAAAxB,SAAAkB,OAAAG,MAAA,IAEAZ,IAAA,GACA,KAAA,GAAAgB,GAAA,EAAAC,EAAAF,EAAAE,OAAAD,EAAAC,EAAAD,IAAA,CAGA,IAFA,GAAAP,GAAAM,EAAAC,GAEA,KAAAP,EAAAS,OAAA,IACAT,EAAAA,EAAAU,UAAA,EAEA,IAAA,GAAAV,EAAAW,QAAApB,GACA,MAAAS,GAAAU,UAAAnB,EAAAiB,OAAAR,EAAAQ,QAIA,OAAA,EAGA,QAAAI,KACAtB,EAAA,WAAAuB,KAAAC,MAAA,IAAAD,KAAAE,SAAA,GAAA,IACAC,EAAArC,MAEAR,EAAA8C,EAAA,2BAGA,QAAAC,MACA,IAAAC,GAIAC,OAAAC,YAAAF,GACAP,IAzDArC,EAAAA,KAEA,IACA0C,GAAAnC,SAAAwC,cAAA,sBACAC,EAAAhD,EAAAgD,OAAA,oDACAJ,EAAA5C,EAAA4C,iBAAA,EACAH,EAAAvC,EAAAF,EAAAiD,MAEA,OAAA,QAAAP,MACAQ,SAAAC,KAAA,mEAGAxD,EAAA+C,EAAA,kBAiDAG,OAAAO,iBAAA,SAAA,WACA,mBAAAP,QAAAQ,sBACAR,OAAAQ,sBAAAV,GAEAA,UAIApC,UAAA6C,iBAAA,mBAAA,WACAtB,EAAA,YAIAW,EAAArC,OAHAqC,EAAApC,SACAV,EAAA+C,EAAA,2BAMA,KAAA,GADAY,GAAA/C,SAAAgD,iBAAAP,GACAhB,EAAA,EAAAwB,EAAAF,EAAArB,OAAAD,EAAAwB,EAAAxB,IACAsB,EAAAtB,GAAAoB,iBAAA,QAAA,WACAf,SAMAQ,QAAA9C,gBACA8C,OAAA9C,cAAAA","file":"bengor-cookies.min.js","sourcesContent":["/*\n * This file is part of the BenGorCookies library.\n *\n * (c) Beñat Espiña <benatespina@gmail.com>\n * (c) Gorka Laucirica <gorka.lauzirika@gmail.com>\n *\n * For the full copyright and license information, please view the LICENSE\n * file that was distributed with this source code.\n */\n\n'use strict';\n\n(function () {\n\n  var BenGorCookies = function (options) {\n    return new Cookies(options);\n  };\n\n  function hasClass(el, className) {\n    return el.className.match(new RegExp('(\\\\s|^)' + className + '(\\\\s|$)'));\n  }\n\n  function addClass(el, className) {\n    if (!hasClass(el, className)) el.className += \" \" + className;\n  }\n\n  function removeClass(el, className) {\n    if (hasClass(el, className)) {\n      var reg = new RegExp('(\\\\s|^)' + className + '(\\\\s|$)');\n      el.className = el.className.replace(reg, ' ');\n    }\n  }\n\n  var GoogleTagManager = function (id) {\n    var element = document.createElement('div'), add, remove;\n\n    id = id || 'undefined';\n    element.setAttribute('id', 'bengor-cookies-gtm');\n\n    add = function () {\n      var body = document.getElementsByTagName('BODY')[0];\n\n      if (typeof id === 'undefined' || id === 'undefined' || element.innerHTML) {\n        return;\n      }\n      element.innerHTML =\n        '<noscript><iframe src=\"//www.googletagmanager.com/ns.html?id=' + id + '\"' +\n        'height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>' +\n        '<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({\"gtm.start\":' +\n        'new Date().getTime(),event:\"gtm.js\"});var f=d.getElementsByTagName(s)[0],' +\n        'j=d.createElement(s),dl=l!=\"dataLayer\"?\"&l=\"+l:\"\";j.async=true;j.src=' +\n        '\"//www.googletagmanager.com/gtm.js?id=\"+i+dl;f.parentNode.insertBefore(j,f);' +\n        '})(window,document,\"script\",\"dataLayer\",\"' + id + '\");</script>';\n\n      body.insertBefore(element, body.firstChild);\n    };\n\n    remove = function () {\n      element.innerHTML = '';\n    };\n\n    return {\n      add: add,\n      remove: remove\n    };\n  };\n\n  var Cookies = function (options) {\n    options = options || {};\n\n    var\n      mainElement = document.querySelector('.js-bengor-cookies'),\n      links = options.links || '.bengor-cookies__actions, .bengor-cookies__button',\n      maxPageYOffset = options.maxPageYOffset || false,\n      GTM = GoogleTagManager(options.GTMId);\n\n    if (null === mainElement) {\n      console.warn('\"js-bengor-cookies\" class is not added to your cookies element');\n      return;\n    }\n    addClass(mainElement, 'bengor-cookies');\n\n    function setCookie(name, value, expirationDays) {\n      var\n        date = new Date(),\n        expires = 'expires=';\n\n      date.setTime(date.getTime() + (expirationDays * 24 * 60 * 60 * 1000));\n      expires += date.toGMTString();\n      document.cookie = name + '=' + value + '; ' + expires + '; ' +\n        location.hostname.split('.').reverse()[1] + '.' +\n        location.hostname.split('.').reverse()[0] + '; path=/';\n    }\n\n    function getCookie(name) {\n      var cookies = document.cookie.split(';');\n\n      name = name + '=';\n      for (var i = 0, length = cookies.length; i < length; i++) {\n        var cookie = cookies[i];\n\n        while (cookie.charAt(0) == ' ') {\n          cookie = cookie.substring(1);\n        }\n        if (cookie.indexOf(name) == 0) {\n          return cookie.substring(name.length, cookie.length);\n        }\n      }\n\n      return false;\n    }\n\n    function acceptCookies() {\n      setCookie('username', Math.floor((Math.random() * 100000000) + 1), 30);\n      GTM.add();\n\n      removeClass(mainElement, 'bengor-cookies--visible');\n    }\n\n    function scrollingAcceptCookies() {\n      if (false === maxPageYOffset) {\n        return;\n      }\n\n      if (window.pageYOffset > maxPageYOffset) {\n        acceptCookies();\n      }\n    }\n\n    window.addEventListener('scroll', function () {\n      if (typeof window.requestAnimationFrame !== 'undefined') {\n        window.requestAnimationFrame(scrollingAcceptCookies);\n      } else {\n        scrollingAcceptCookies();\n      }\n    });\n\n    document.addEventListener('DOMContentLoaded', function () {\n      if (!getCookie('username')) {\n        GTM.remove();\n        addClass(mainElement, 'bengor-cookies--visible');\n      } else {\n        GTM.add();\n      }\n\n      var elements = document.querySelectorAll(links);\n      for (var i = 0, iLen = elements.length; i < iLen; i++) {\n        elements[i].addEventListener('click', function () {\n          acceptCookies();\n        });\n      }\n    });\n  };\n\n  if (!window.BenGorCookies) {\n    window.BenGorCookies = BenGorCookies;\n  }\n\n}());\n"],"sourceRoot":"/source/"}